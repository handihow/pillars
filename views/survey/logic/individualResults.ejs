<script>
	$(document).ready(function() {

		var organisationStatisticsString = $( '#organisationStatistics' ).text();

		var organisationStatistics = JSON.parse(organisationStatisticsString || '[]');

		var schoolStatisticsString = $( '#schoolStatistics' ).text();

		var schoolStatistics = JSON.parse(schoolStatisticsString || '[]');

		var individualStatisticsString = $( '#individualStatistics' ).text();

		var individualStatistics= JSON.parse(individualStatisticsString || '[]');

		var chartWidth = $('#organisationStatistics').parent().width();

		var chartHeight = $('#organisationStatistics').parent().height();

		var data = [];

		for(var i=0; i<organisationStatistics.length; i++){
			console.log(i);
			var array1 = Array(organisationStatistics.length);
			array1.fill('organisatie');
			var trace1 = {
				boxpoints: 'all',
				y: organisationStatistics[i].statistics,
				x: array1,
				type: 'box',
				name: organisationStatistics[i].title.length > 30 ? 
							organisationStatistics[i].title.substring(0,29) + '...' : 
							organisationStatistics[i].title,
				jitter: 0.5,
        		whiskerwidth: 0.2,
		    	marker: {
		            size: 2
		        },
		        line: {
		            width: 1
		        },
		        legendgroup: 'organisation',
				// fillcolor: chartColors[i],
			}
			data.push(trace1);
			if(schoolStatistics.length>0){
				var array2 = Array(schoolStatistics.length);
				array2.fill('school');
				var trace2 = {
					boxpoints: 'all',
					y: schoolStatistics[i].statistics,
					x: array2,
					type: 'box',
					name: schoolStatistics[i].title.length > 30 ?
										schoolStatistics[i].title.substring(0,29) + '...' :
										schoolStatistics[i].title,
					jitter: 0.5,
	        		whiskerwidth: 0.2,
			    	marker: {
			            size: 2
			        },
			        line: {
			            width: 1
			        },
			        legendgroup: 'school',
					// fillcolor: chartColors[i],
				}
				data.push(trace2);
			}
			var array3 = Array(organisationStatistics.length);
			array3.fill('individueel');
			var trace3 = {
				boxpoints: 'all',
				y: individualStatistics[i].statistics,
				x: array3,
				type: 'box',
				name: individualStatistics[i].title.length > 30 ?
										individualStatistics[i].title.substring(0,29) + '...' :
										individualStatistics[i].title,
				legendgroup: 'individual',
				// fillcolor: chartColors[i],
			}
			data.push(trace3);
		}

		// var layout = {
		//   boxmode: 'group'	  
		// }
		var layout = {
		  // title: 'Resultaten per deelgebied',
		  boxmode: 'group',
		  showlegend: true,
		  // width: chartWidth,
		  // height: chartHeight * 0.9
		  
		}


		Plotly.newPlot('analysisChart', data, layout,{responsive: true});

			
	});
</script>