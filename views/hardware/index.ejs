<% include ../partials/school/header %>
<% include ../partials/school/side-header %>


    <h2 class="ui header"><i class="desktop icon"></i></i>Hardware van <%= school.instellingsnaam %></h2>
    <a class="positive ui button right" href="/scholen/<%=school._id%>/hardware/bulk">Importeer Hardware CSV</a>
    <h2 class="ui right aligned header">
      <a href="/scholen/<%=school._id%>/hardware/instellingen">
      <i class="setting icon"></i>
      </a>
    </h2>
      <div class="ui cards">
        <!--make a card for each type of hardware-->
        <% school.instellingenHardwareTypes.forEach(function(type){ %>
        <% if (type.bijhouden) { %>
        <div class="card">
          <div class="content">
            <div class="header" id="countHeader"><a href="#<%=type.enkelvoud%>"><%=type.meervoud%></a></div>
            <div class="description count">
                <% var count = 0 %>
                <% school.hardware.forEach(function(hardware){ %>
                    <% if(!isNaN(hardware.aantalWerkplekkenMultipoint) && hardware.type === type.enkelvoud) { count += hardware.aantalWerkplekkenMultipoint %>
                    <% } else if(hardware.type === type.enkelvoud) { count += 1} %>
                <% }); %>
                <%= count %>
            </div>
          </div>
          <div class="ui bottom attached button">
            <a href="/scholen/<%=school._id%>/hardware/new/<%=type.enkelvoud%>">
            <i class="add icon"></i>
            <%=type.enkelvoud%>
            </a>
          </div>
        </div>
        <% } %>
        <% }); %>
      </div>
  </div>
  <div class="ui segment">
  <!--make a table for each type of hardware-->
  <% global.hardwareTypes.forEach(function(type){ %>
      <% if(school.hardware.map(a => a.type).includes(type.enkelvoud)) { %>
      <div class="ui huge header"><%=type.meervoud%></div>
      <a id="<%=type.enkelvoud%>">
      <table class="ui celled table unstackable">
          <thead>
              <tr>
                  <th>Type</th>
                  <th>Naam</th>
                  <th>Merk</th>
                  <th>Meer info</th>
              </tr>
          </thead>
      <% } %>
          <tbody>
              <% school.hardware.forEach(function(hardware){ %>
                  <% if(type.enkelvoud === hardware.type) { %>
                  <tr>
                      <td><%= hardware.type %></td>
                      <td><%= hardware.naam %></td>
                      <td><%= hardware.merk %></td>
                      <td>
                        <a 
                          class="ui primary basic button" 
                          href="/scholen/<%=school._id%>/hardware/<%=hardware._id%>">
                          Toon info
                        </a>
                        <form action="/scholen/<%=school._id%>/hardware/<%=hardware._id%>/copy" method="post" id="delete">
                          <input type="hidden" name="hardware[naam]" value="<%=hardware.naam%>">
                          <input type="hidden" name="hardware[type]" value="<%=hardware.type%>">
                          <input type="hidden" name="hardware[merk]" value="<%=hardware.merk%>">
                          <input type="hidden" name="hardware[model]" value="<%=hardware.model%>">
                          <input type="hidden" name="hardware[serialTag]" value="<%=hardware.serialTag%>">
                          <input type="hidden" name="hardware[processor]" value="<%=hardware.processor%>">
                          <input type="hidden" name="hardware[werkgeheugen]" value="<%=hardware.werkgeheugen%>">
                          <input type="hidden" name="hardware[jaarIngebruikname]" value="<%=hardware.jaarIngebruikname%>">
                          <input type="hidden" name="hardware[isTouchscreenDigibord]" value="<%=hardware.isTouchscreenDigibord%>">
                          <input type="hidden" name="hardware[schermgrootteDigibord]" value="<%=hardware.schermgrootteDigibord%>">
                          <button class="ui primary basic button" type="submit">Kopieer</button>
                        </form>
                      </td>
                  </tr>
                <% } %>
              <% }); %>
          </tbody>
        </table>
    <% }); %>
  </div>
  
<% include ../partials/school/side-footer %>
<% include ../partials/school/footer %>

